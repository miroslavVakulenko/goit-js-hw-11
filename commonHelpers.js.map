{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// const userRequest = '';\n// https://pixabay.com/api/?key=42512017-1bddfdd3afd2851258a10c68c&q=sex&image_type=photo&orientation=horizontal&safesearch=true\nconst API_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42512017-1bddfdd3afd2851258a10c68c';\n\nfunction fetchImg(userRequest, per_page = 9) {\n  return fetch(\n    `${API_URL}?key=${API_KEY}&q=${userRequest}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${per_page}`\n  ).then(res => res.json());\n}\n\nexport { fetchImg };\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchImg } from './js/pixabay-api';\nimport simpleLightbox from 'simplelightbox';\n\n// fetchImg()\n//   .then(res => console.log(res))\n//   .catch(err => console.log(err));\nconst btn = document.querySelector('button[type=\"submit\"]');\nconst imgList = document.querySelector('.images-list');\nconst form = document.querySelector('.js-form');\nconst jsInput = document.querySelector('input[name=\"js-input\"]');\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\n\nform.addEventListener('submit', searchForm);\n\n//listen form field value and put vatue to the fetchImg()\nfunction searchForm(evt) {\n  evt.preventDefault();\n  loader.style.display = 'block';\n  const inputValue = evt.currentTarget.elements['js-input'].value;\n  if (!inputValue) {\n    btn.disabled = true;\n    iziToast.show({\n      message: 'Please, enter the value!',\n    });\n  } else {\n    fetchImg(inputValue)\n      .then(res => {\n        //if img not find show alert\n        if (res.total === 0) {\n          iziToast.show({\n            message:\n              'Sorry, there are no images matching your search query. Please try again!',\n          });\n        } else {\n          //clear\n          imgList.innerHTML = '';\n          imgList.insertAdjacentHTML('beforeend', createMarkup(res.hits));\n        }\n      })\n      .catch(err => console.log(err))\n      .finally(() => {\n        // Hide loader when image loading is finished\n        loader.style.display = 'none';\n      });\n  }\n}\n\nfunction createMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery__item\">\n        <div class=\"gallery__card\">\n          <a href=\"${largeImageURL}\" class=\"gallery-card__link\"\n            ><img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-card__image\"\n          /></a>\n          <div class=\"gallery-card__description\">\n            <p class=\"gallery-card__text\">Likes <span>${likes}</span></p>\n            <p class=\"gallery-card__text\">Views <span>${views}</span></p>\n            <p class=\"gallery-card__text\">Comments <span>${comments}</span></p>\n            <p class=\"gallery-card__text\">Downloads <span>${downloads}</span></p>\n          </div>\n        </div>\n      </li>`;\n      }\n    )\n    .join('');\n}\n//at repeated input unlock button\njsInput.addEventListener('input', function () {\n  btn.disabled = false;\n});\n\nimgList.addEventListener('click', function (evt) {\n  evt.preventDefault();\n  const gallerySimple = new SimpleLightbox('a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  simpleLightbox.open();\n});\n\n// imgList.addEventListener('load', addLoader);\n// function addLoader() {\n//   loader.classList.add('loader');\n// }\n"],"names":["API_URL","API_KEY","fetchImg","userRequest","per_page","res","btn","imgList","form","jsInput","loader","searchForm","evt","inputValue","iziToast","createMarkup","err","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","simpleLightbox"],"mappings":"6vBAEA,MAAMA,EAAU,2BACVC,EAAU,qCAEhB,SAASC,EAASC,EAAaC,EAAW,EAAG,CAC3C,OAAO,MACL,GAAGJ,CAAO,QAAQC,CAAO,MAAME,CAAW,qEAAqEC,CAAQ,EACxH,EAAC,KAAKC,GAAOA,EAAI,KAAM,CAAA,CAC1B,CCGA,MAAMC,EAAM,SAAS,cAAc,uBAAuB,EACpDC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAU,SAAS,cAAc,wBAAwB,EACzDC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OAEvBF,EAAK,iBAAiB,SAAUG,CAAU,EAG1C,SAASA,EAAWC,EAAK,CACvBA,EAAI,eAAc,EAClBF,EAAO,MAAM,QAAU,QACvB,MAAMG,EAAaD,EAAI,cAAc,SAAS,UAAU,EAAE,MACrDC,EAMHX,EAASW,CAAU,EAChB,KAAKR,GAAO,CAEPA,EAAI,QAAU,EAChBS,EAAS,KAAK,CACZ,QACE,0EACd,CAAW,GAGDP,EAAQ,UAAY,GACpBA,EAAQ,mBAAmB,YAAaQ,EAAaV,EAAI,IAAI,CAAC,EAExE,CAAO,EACA,MAAMW,GAAO,QAAQ,IAAIA,CAAG,CAAC,EAC7B,QAAQ,IAAM,CAEbN,EAAO,MAAM,QAAU,MAC/B,CAAO,GAvBHJ,EAAI,SAAW,GACfQ,EAAS,KAAK,CACZ,QAAS,0BACf,CAAK,EAsBL,CAEA,SAASC,EAAaE,EAAQ,CAC5B,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,qBAEML,CAAa;AAAA,yBACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,wDAGKC,CAAK;AAAA,wDACLC,CAAK;AAAA,2DACFC,CAAQ;AAAA,4DACPC,CAAS;AAAA;AAAA;AAAA,YAKhE,EACA,KAAK,EAAE,CACZ,CAEAf,EAAQ,iBAAiB,QAAS,UAAY,CAC5CH,EAAI,SAAW,EACjB,CAAC,EAEDC,EAAQ,iBAAiB,QAAS,SAAUK,EAAK,CAC/CA,EAAI,eAAc,EACI,IAAIa,EAAe,IAAK,CAC5C,aAAc,MACd,aAAc,GAClB,CAAG,EACDC,EAAe,KAAI,CACrB,CAAC"}